/*
 * -------------------------------------------------
 *  Nextflow config file for running tests
 * -------------------------------------------------
 * Defines bundled input files and everything required
 * to run a fast and simple test. Use as follows:
 *   nextflow run main.nf -profile test
 */

params {

  config_profile_name = 'Test data'
  config_profile_description = 'Minimal test dataset to check pipeline functions'

  // Limit resources so that this can run on Travis
  maxMemory = 30.GB
  maxCpus = 3
  maxTime = 1.h

  // Input data
  if (params.protocol == "scchip_indrop" ){
    samplePlan = "$projectDir/test/sampleplan_scchip_indrop.csv"
    genome = 'hg38'
  }else if (params.protocol == "sccuttag_10X"){
    samplePlan = "$projectDir/test/sampleplan_sccuttag_10X.csv"
    genome = 'hg38'
  }else if (params.protocol == "sccuttag_indrop"){
    samplePlan = "$projectDir/test/sampleplan_sccuttag_indrop.csv"
    genome = 'hg38'
  }else{
    protocol = "scchip_indrop"
    //samplePlan = "$projectDir/test/sampleplan_scchip_indrop.csv"
    readPaths = [
       ['toy_D937C01', ["$projectDir/test/data/toy_D937C01.R1.fastq.gz","$projectDir/test/data/toy_D937C01.R2.fastq.gz"]],
       ['toy_D937C02', ["$projectDir/test/data/toy_D937C02.R1.fastq.gz","$projectDir/test/data/toy_D937C02.R2.fastq.gz"]]
    ]
    genome = 'hg38'
  }

  // Options
  minReadsPerCellmatrix = 100
  minReadsPerCellmqcChIP = 1
  minReadsPerCellmqcCUTindrop = 1
  minReadsPerCellmqcCUT10x = 1
}

